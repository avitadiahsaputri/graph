"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assert_1 = require("assert");
const OpenAIPlanner_1 = require("./OpenAIPlanner");
/* eslint-disable security/detect-object-injection */
describe('OpenAIPlanner', () => {
    const createMockOptions = () => ({
        apiKey: 'test',
        defaultModel: 'test'
    });
    describe('constructor()', () => {
        it('should not modify passed in options', () => {
            const mockOpts = createMockOptions();
            const planner = new OpenAIPlanner_1.OpenAIPlanner(mockOpts);
            const options = planner.options;
            assert_1.strict.notDeepEqual(options, mockOpts);
            assert_1.strict.equal(options.oneSayPerTurn, false);
            assert_1.strict.equal(options.useSystemMessage, false);
            assert_1.strict.equal(options.logRequests, false);
        });
        it('should call createClient() during construction', () => {
            let createClientCalled = false;
            class TestOpenAIPlanner extends OpenAIPlanner_1.OpenAIPlanner {
                constructor(options) {
                    super(options);
                }
                createClient(options) {
                    createClientCalled = true;
                    return super.createClient(options);
                }
            }
            const mockOpts = createMockOptions();
            new TestOpenAIPlanner(mockOpts);
            (0, assert_1.strict)(createClientCalled);
        });
    });
});
//# sourceMappingURL=OpenAIPlanner.spec.js.map